<tool id="heatmap2" name="heatmap2" version="0.0.1">
    <requirements>
        <requirement type="package">r-getopt</requirement>
        <requirement type="package">r-rcolorbrewer</requirement>
        <requirement type="package">r-gplots</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command><![CDATA[
        Rscript ${__tool_directory__}/heatmap2.R --input "$input1" --title "$title" --keylabel "$keylabel" 
        --transform "$transformation.transform"
        --output "Rplot.pdf"

    ]]></command>
    <inputs>
        <param name="input1" type="data" format="tabular" label="Input should have column headers - these will be the columns that are plotted"/>
        <param name="title" size="30" type="text" format="txt" label="Plot title"/> 
        <param name=" keylabel" size="30" type="text" format="txt" label="key label"/> 
        <conditional name="transformation">
            <param name="transform" type="select" label="Advanced - log transformation">
              <option value="none">Plot the data as it is</option>
              <option value="log2">Log2(value) transform my data</option>
              <option value="log2plus1">Log2(value+1) transform my data</option>
              <option value="log10">Log10(value) transform my data</option>
              <option value="log10plus1">Log10(value+1) transform my data</option>
            </param>
        </conditional>
    </inputs>
    <outputs>
        <!-- <data name="output1" format="png" from_work_dir="Rplot.png"/> -->
        <data name="output1" format="pdf" from_work_dir="Rplot.pdf"/>
    </outputs>
    <tests>
        <test>
            <param name="input1" value="input.txt"/>
            <output name="output1" file="Rplot.pdf"/>
        </test>
    </tests>
    <help><![CDATA[
This tool will generate a clustered heatmap of your data. More customization options will be added, for now the heatmap uses a red coloring scheme and clustering is performed using the "maximum" similarity measure and the "complete" hierarchical clustering measure. 

Input data should have row labels in the first column and column labels. For example, the row labels (the first column) should represent gene IDs and the column labels should represent sample IDs. 

This wrapper employs the heatmap.2 function of R.
    ]]></help>
    <citations>
        <citation type="bibtex">
@misc{renameTODO,
  author = {TODO, FirstTODO},
  year = {TODO},
  title = {TODO},
  url = {under construction},
}</citation>
    </citations>
</tool>
